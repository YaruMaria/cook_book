{% extends "base.html" %}

{% block content %}
<div class="recipe-detail-container fade-in">
    <div class="recipe-header">
        {% if recipe.photos and recipe.photos[0] %}
        <div class="recipe-main-photo">
            <img src="{{ url_for('static', filename=recipe.photos[0]) }}" alt="{{ recipe.title }}">
        </div>
        {% endif %}

        <div class="recipe-info">
            <h1>{{ recipe.title }}</h1>
            <p class="recipe-meta">
                –î–æ–±–∞–≤–ª–µ–Ω–æ: {{ recipe.created_at }}
                {% if recipe.updated_at and recipe.updated_at != recipe.created_at %}
                <br>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ recipe.updated_at }}
                {% endif %}
            </p>

            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="recipe-actions">
                <a href="{{ url_for('edit_recipe', recipe_id=recipe.id) }}" class="btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <form method="POST" action="{{ url_for('delete_recipe', recipe_id=recipe.id) }}"
                      onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç?');"
                      style="display: inline;">
                    <button type="submit" class="btn-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </div>
        </div>
    </div>

    <div class="recipe-content">
        <div class="ingredients-section">
            <h2>üõí –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h2>
            <ul class="ingredients-list">
                {% for ingredient in recipe.ingredients %}
                <li>{{ ingredient }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="instructions-section">
            <h2>üë©‚Äçüç≥ –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</h2>
            <ol class="instructions-list">
                {% for instruction in recipe.instructions %}
                <li>{{ instruction }}</li>
                {% endfor %}
            </ol>
        </div>

        <!-- –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π -->
        {% if recipe.photos|length > 1 %}
        <div class="photo-gallery">
            <h2>üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h2>
            <div class="gallery-grid">
                {% for photo in recipe.photos %}
                <div class="gallery-item">
                    <img src="{{ url_for('static', filename=photo) }}" alt="{{ recipe.title }} —Ñ–æ—Ç–æ {{ loop.index }}">
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <div class="back-button">
            <a href="{{ url_for('explore') }}" class="btn-enchant">‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ—Ü–µ–ø—Ç–∞–º</a>
        </div>
    </div>
</div>

<style>
    .recipe-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
    }

    .btn-edit {
        display: inline-block;
        padding: 0.7rem 1.5rem;
        background: linear-gradient(135deg, var(--warning), var(--primary));
        color: var(--darker);
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
    }

    .btn-edit:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(199, 174, 43, 0.3);
    }

    .btn-delete {
        display: inline-block;
        padding: 0.7rem 1.5rem;
        background: linear-gradient(135deg, #dc3545, #c82333);
        color: white;
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
    }

    .btn-delete:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
    }

    .photo-gallery {
        margin-top: 2rem;
    }

    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
    }

    .gallery-item img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 10px;
        border: 2px solid var(--lighter);
        transition: transform 0.3s ease;
    }

    .gallery-item img:hover {
        transform: scale(1.05);
    }

    @media (max-width: 768px) {
        .recipe-actions {
            flex-direction: column;
        }

        .btn-edit, .btn-delete {
            text-align: center;
        }

        .gallery-grid {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }
    }
</style>
{% endblock %}