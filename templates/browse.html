{% extends "base.html" %}

{% block content %}
<div class="recipes-grid">
    <h2 style="grid-column: 1 / -1; margin-bottom: 2rem; text-align: center;">–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</h2>

    {% if recipes %}
        {% for recipe in recipes %}
        <a href="{{ url_for('view_recipe', recipe_id=recipe.id) }}" class="recipe-card-link">
            <div class="recipe-card">
                <div class="recipe-image">
                    {% if recipe.photos and recipe.photos[0] %}
                    <img src="{{ url_for('static', filename=recipe.photos[0]) }}" alt="{{ recipe.title }}">
                    {% else %}
                    <span>üç≤</span>
                    {% endif %}
                </div>
                <div class="recipe-content">
                    <h3 class="recipe-title">{{ recipe.title }}</h3>
                    <p class="recipe-author">–î–æ–±–∞–≤–ª–µ–Ω–æ: {{ recipe.created_at }}</p>

                    <div class="recipe-ingredients">
                        <h4>‚öóÔ∏è –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</h4>
                        <ul class="ingredient-list">
                            {% for ingredient in recipe.ingredients[:3] %}
                            <li>{{ ingredient }}</li>
                            {% endfor %}
                            {% if recipe.ingredients|length > 3 %}
                            <li>...–∏ –µ—â–µ {{ recipe.ingredients|length - 3 }}</li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
        </a>
        {% endfor %}
    {% else %}
        <div class="empty-state" style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
            <h2>–†–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç...</h2>
            <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –¥–æ–±–∞–≤–∏—Ç —Ä–µ—Ü–µ–ø—Ç!</p>
            <a href="{{ url_for('create_recipe') }}" class="btn-enchant" style="margin-top: 1rem;">–°–æ–∑–¥–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç</a>
        </div>
    {% endif %}
</div>

<style>
    .recipe-card-link {
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .recipe-card-link:hover .recipe-card {
        transform: translateY(-8px) scale(1.02);
        box-shadow:
            0 20px 40px rgba(0, 0, 0, 0.3),
            0 0 0 1px var(--glow-purple);
    }

    .recipe-image img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .empty-state {
        background: var(--glass-bg);
        border-radius: 20px;
        padding: 2rem;
        border: 1px solid var(--glass-border);
    }
</style>
{% endblock %}